<link rel="import" href="../../bower_components/polymer/polymer.html">

<polymer-element name="user-score" attributes="score">
  <template>
    <style>
    :host{
      display: block;
    }
    #score-value{
      font-family: Consolas;
    }
    </style>
    Score: <span id="score-value"><span id="spacing"></span>{{updateSpacing()}}{{score}}</span>
  </template>
  <script>
  Polymer({
    /**
     * The score value.
     * 
     * @attribute score
     * @type integer
     * @default 0
     */
    score: 0,
    
    /**
     * Update the spacing between before the score value.
     * 
     * The score value can't simply be prefixed with spaces before printing,
     * as the {{}} will escapes any HTML within them (including &nbsp;)
     */
    updateSpacing: function(){
      // the first time this method is called, the 'this' object wont be ready yet.
      // this method therefore needs to be called by the ready method.
      if(!this.$) return;
      
      this.setSpacing('&nbsp;', 5 - this.score.toString().length);
    },
    
    /**
     * Insert the given character the given number of times, into the spacing container
     * 
     * @param character The character to insert
     * @param number The number of times to insert the given character
     */
    setSpacing: function(character, number){
      var str = '';
      
      for(var i=0; i<number; i++){
        str += character;
      }
      
      this.injectBoundHTML(str, this.$.spacing);
    },
    
    ready: function(){
      this.updateSpacing();
    }
  });
  </script>
</polymer-element>