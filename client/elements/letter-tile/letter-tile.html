<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="letter-tile">
  <style>
  :host{
    position: relative;
    display: block;
    width: 48px;
    background-size: 1248px 48px;
    background-repeat: no-repeat;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -o-user-select: none;
    user-select: none;
    cursor: default;
    cursor: all-scroll;
    cursor: grab;
  }
  :host:after{
    padding-top: 100%;
    display: block;
    content: '';
  }
  img{
    width: 100%;
    height: 100%;
  }
  </style>
  <template>
    <content></content>
  </template>
</dom-module>

<script>
Polymer({
  is: 'letter-tile',
  
  properties: {
    src: String,
    
    letter: String
  },
  
  ready: function(){
    this.style.backgroundImage = 'url("' + this.src + '")';
    
    var $this = this;
     
     // on window resize
     window.addEventListener('resize', function(){
       $this.updateSize();  // resize the tile
     });
  },
  
  attached: function(){
    this.updateSize();
  },
  
  /**
   * Update the tile's size
   */
  updateSize: function(){
    //todo
    this.updateFontSize(); // update the font size
  },
  
  /**
   * Update the font-size of the tile
   */
  updateFontSize: function(){
    var width = parseFloat(window.getComputedStyle(this, null).getPropertyValue('width'));

    this.style.backgroundSize = (width*26) + 'px ' + width + 'px';
    this.style.backgroundPosition = (-(this.letter.charCodeAt(0) - 'a'.charCodeAt(0)) * width) + 'px 0px';
  },
});
</script>